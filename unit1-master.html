<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1 Vocabulary Master - Comprehensive Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Fredoka', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }
        
        .game-container {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            max-width: 1400px;
            width: 100%;
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-fill {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .category-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .category-tab {
            background: #f0f0f0;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.05);
        }
        
        .category-tab:hover {
            transform: scale(1.05);
        }
        
        .game-area {
            min-height: 400px;
            margin-bottom: 30px;
        }
        
        .word-display {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .word-card {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            padding: 40px;
            border-radius: 20px;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(255,107,107,0.4);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .word-english {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .word-chinese {
            font-size: 1.5rem;
            opacity: 0.9;
        }
        
        .word-phonetic {
            font-size: 1.2rem;
            opacity: 0.8;
            font-style: italic;
        }
        
        .definition-card {
            background: #f8f9fa;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            color: #333;
        }
        
        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .game-mode {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .game-mode:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(76,175,80,0.4);
        }
        
        .game-mode.active {
            border-color: #ffd700;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
        }
        
        .mode-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .mode-description {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .answer-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-btn {
            background: white;
            border: 3px solid #e0e0e0;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .answer-btn:hover {
            background: #f8f9fa;
            border-color: #667eea;
            transform: scale(1.02);
        }
        
        .answer-btn.correct {
            background: #d4edda;
            border-color: #4CAF50;
            color: #155724;
            animation: correctPulse 0.6s ease;
        }
        
        .answer-btn.wrong {
            background: #f8d7da;
            border-color: #f44336;
            color: #721c24;
            animation: wrongShake 0.6s ease;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102,126,234,0.4);
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102,126,234,0.6);
        }
        
        .btn.secondary {
            background: linear-gradient(45deg, #ff9800, #f57c00);
        }
        
        .btn.danger {
            background: linear-gradient(45deg, #f44336, #da190b);
        }
        
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 3px solid #e0e0e0;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #666;
        }
        
        .message {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }
        
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }
        
        .timer {
            font-size: 2rem;
            font-weight: 700;
            color: #ff6b6b;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .completed-words {
            background: #e8f5e8;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .completed-words h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .word-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .word-tag {
            background: #4CAF50;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .leaderboard-toggle {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .leaderboard-panel {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(255,215,0,0.4);
            border: 3px solid #ffd700;
        }
        
        .leaderboard-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .leaderboard-header h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .leaderboard-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .filter-btn {
            background: rgba(255,255,255,0.8);
            border: 2px solid #333;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
        }
        
        .filter-btn.active {
            background: #333;
            color: #ffd700;
            transform: scale(1.05);
        }
        
        .filter-btn:hover {
            transform: scale(1.05);
        }
        
        .student-input {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .student-input input {
            padding: 12px 20px;
            border: 3px solid #333;
            border-radius: 25px;
            font-size: 1.1rem;
            font-family: 'Fredoka', cursive;
            width: 250px;
        }
        
        .student-input input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102,126,234,0.3);
        }
        
        .leaderboard-table {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .leaderboard-item {
            display: grid;
            grid-template-columns: 60px 1fr 80px 80px 80px 100px;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #ddd;
            font-weight: 600;
            color: #333;
        }
        
        .leaderboard-item.header {
            background: #333;
            color: #ffd700;
            font-weight: 700;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .leaderboard-item:hover {
            background: rgba(102,126,234,0.1);
            transform: scale(1.02);
            transition: all 0.3s ease;
        }
        
        .rank-1 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 10px;
            animation: goldPulse 2s infinite;
        }
        
        .rank-2 {
            background: linear-gradient(45deg, #c0c0c0, #e8e8e8);
            border-radius: 10px;
        }
        
        .rank-3 {
            background: linear-gradient(45deg, #cd7f32, #e8a75d);
            border-radius: 10px;
        }
        
        @keyframes goldPulse {
            0%, 100% { box-shadow: 0 0 5px rgba(255,215,0,0.5); }
            50% { box-shadow: 0 0 20px rgba(255,215,0,0.8); }
        }
        
        .rank-medal {
            font-size: 1.5rem;
            margin-right: 5px;
        }
        
        .leaderboard-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: achievementBounce 0.6s ease;
        }
        
        @keyframes achievementBounce {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        
        .achievement-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .achievement-desc {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .word-english {
                font-size: 2rem;
            }
            
            .answer-options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .leaderboard-item {
                grid-template-columns: 40px 1fr 60px 60px;
                font-size: 0.9rem;
            }
            
            .leaderboard-item span:nth-child(4),
            .leaderboard-item span:nth-child(5) {
                display: none;
            }
            
            .student-input {
                flex-direction: column;
                align-items: center;
            }
            
            .student-input input {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="location.href='index.html'">‚Üê Back to Games</button>
    
    <header>
        <h1>üìö Unit 1 Vocabulary Master</h1>
        <p>Complete all vocabulary challenges!</p>
    </header>
    
    <main class="game-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 0%">
                0% Complete
            </div>
        </div>
        
        <div class="stats-panel">
            <div class="stat-item">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="correct">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Streak</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
        </div>
        
        <div class="leaderboard-toggle">
            <button class="btn" onclick="toggleLeaderboard()">üèÜ View Leaderboard</button>
        </div>
        
        <div class="leaderboard-panel" id="leaderboard-panel" style="display: none;">
            <div class="leaderboard-header">
                <h2>üèÜ Student Leaderboard</h2>
                <div class="leaderboard-filters">
                    <button class="filter-btn active" onclick="filterLeaderboard('today')">Today</button>
                    <button class="filter-btn" onclick="filterLeaderboard('week')">This Week</button>
                    <button class="filter-btn" onclick="filterLeaderboard('all')">All Time</button>
                </div>
            </div>
            
            <div class="student-input">
                <input type="text" id="student-name" placeholder="Enter your name..." maxlength="20">
                <button class="btn" onclick="saveScore()">üíæ Save Score</button>
            </div>
            
            <div class="leaderboard-table">
                <div class="leaderboard-item header">
                    <span>Rank</span>
                    <span>Student</span>
                    <span>Score</span>
                    <span>Accuracy</span>
                    <span>Words</span>
                    <span>Date</span>
                </div>
                <div id="leaderboard-list">
                    <!-- Leaderboard entries will be inserted here -->
                </div>
            </div>
            
            <div class="leaderboard-actions">
                <button class="btn secondary" onclick="exportLeaderboard()">üìä Export Data</button>
                <button class="btn danger" onclick="clearLeaderboard()">üóëÔ∏è Clear All</button>
            </div>
        </div>
        
        <div class="category-tabs" id="category-tabs">
            <button class="category-tab active" onclick="selectCategory('animals')">üêæ Animals</button>
            <button class="category-tab" onclick="selectCategory('actions')">üé¨ Actions</button>
            <button class="category-tab" onclick="selectCategory('descriptions')">üé® Descriptions</button>
            <button class="category-tab" onclick="selectCategory('nouns')">üìù Nouns</button>
            <button class="category-tab" onclick="selectCategory('places')">üó∫Ô∏è Places</button>
            <button class="category-tab" onclick="selectCategory('all')">üéØ All Words</button>
        </div>
        
        <div class="game-modes">
            <div class="game-mode active" onclick="selectGameMode('translation')">
                <div class="mode-title">üîÑ Translation</div>
                <div class="mode-description">Match English with Chinese</div>
            </div>
            <div class="game-mode" onclick="selectGameMode('spelling')">
                <div class="mode-title">‚úèÔ∏è Spelling</div>
                <div class="mode-description">Spell the word correctly</div>
            </div>
            <div class="game-mode" onclick="selectGameMode('definition')">
                <div class="mode-title">üìñ Definition</div>
                <div class="mode-description">Choose correct definition</div>
            </div>
            <div class="game-mode" onclick="selectGameMode('phonetic')">
                <div class="mode-title">üîä Phonetic</div>
                <div class="mode-description">Listen and identify</div>
            </div>
        </div>
        
        <div class="timer" id="timer">‚è±Ô∏è 0:00</div>
        
        <div id="message"></div>
        
        <div class="game-area" id="game-area">
            <div class="word-display">
                <div class="word-card">
                    <div class="word-english" id="word-english">Welcome!</div>
                    <div class="word-phonetic" id="word-phonetic"></div>
                    <div class="word-chinese" id="word-chinese">Select a category and game mode to begin</div>
                </div>
            </div>
            
            <div class="definition-card" id="definition-card" style="display: none;"></div>
            
            <div class="answer-options" id="answer-options"></div>
        </div>
        
        <div class="controls">
            <button class="btn" onclick="startNewQuestion()">üéÆ New Question</button>
            <button class="btn secondary" onclick="showHint()">üí° Hint</button>
            <button class="btn secondary" onclick="skipQuestion()">‚è≠Ô∏è Skip</button>
            <button class="btn danger" onclick="resetProgress()">üîÑ Reset Progress</button>
        </div>
        
        <div class="completed-words">
            <h3>‚úÖ Mastered Words</h3>
            <div class="word-tags" id="completed-words"></div>
        </div>
    </main>
    
    <script>
        const vocabularyData = {
            animals: [
                { word: 'fox', chinese: 'ÁãêÁã∏', phonetic: '/f…íks/', type: 'n.' },
                { word: 'giraffe', chinese: 'ÈïøÈ¢àÈπø', phonetic: '/d í…ôÀàr…ëÀêf/', type: 'n.' },
                { word: 'eagle', chinese: 'ÈõïÔºõÈπ∞', phonetic: '/ÀàiÀê…°l/', type: 'n.' },
                { word: 'wolf', chinese: 'Áãº', phonetic: '/w älf/', type: 'n.', note: 'pl. wolves' },
                { word: 'penguin', chinese: '‰ºÅÈπÖ', phonetic: '/Ààpe≈ã…°w…™n/', type: 'n.' },
                { word: 'snake', chinese: 'Ëõá', phonetic: '/sne…™k/', type: 'n.' },
                { word: 'shark', chinese: 'È≤®È±º', phonetic: '/ É…ëÀêk/', type: 'n.' },
                { word: 'whale', chinese: 'È≤∏', phonetic: '/we…™l/', type: 'n.' },
                { word: 'lion', chinese: 'ÁãÆÂ≠ê', phonetic: '/Ààla…™…ôn/', type: 'n.' },
                { word: 'tiger', chinese: 'ËÄÅËôé', phonetic: '/Ààta…™…°…ô(r)/', type: 'n.' },
                { word: 'monkey', chinese: 'Áå¥Â≠ê', phonetic: '/Ààm å≈ãki/', type: 'n.' },
                { word: 'mouse', chinese: 'ËÄÅÈº†', phonetic: '/ma äs/', type: 'n.', note: 'pl. mice' },
                { word: 'bear', chinese: 'ÁÜä', phonetic: '/be…ô(r)/', type: 'n.' },
                { word: 'elephant', chinese: 'Ë±°', phonetic: '/Ààel…™f…ônt/', type: 'n.' }
            ],
            actions: [
                { word: 'care', chinese: 'ÂÖ≥ÂøÉÔºõÂú®‰πé', phonetic: '/ke…ô(r)/', type: 'v.' },
                { word: 'take care of', chinese: 'ÁÖßÈ°æÔºõÂ§ÑÁêÜ', phonetic: '', type: 'phrase' },
                { word: 'look after', chinese: 'ÁÖßÈ°æ', phonetic: '', type: 'phrase' },
                { word: 'guess', chinese: 'ÁåúÊµãÔºõ‰º∞ËÆ°', phonetic: '/…°es/', type: 'v.' },
                { word: 'save', chinese: 'ÊïëÔºõÂÇ®ËìÑÔºõ‰øùÂ≠ò', phonetic: '/se…™v/', type: 'v.' },
                { word: 'pick', chinese: 'Êç°ÔºõÊëò', phonetic: '/p…™k/', type: 'v.' },
                { word: 'pick up', chinese: 'ÊãøËµ∑Ôºõ‰∏æËµ∑', phonetic: '', type: 'phrase' },
                { word: 'carry', chinese: 'ÊãøÔºõÊèê', phonetic: '/Ààk√¶ri/', type: 'v.' },
                { word: 'cut down', chinese: 'Á†ç‰ºêÔºõÂáèÂ∞ë', phonetic: '', type: 'phrase' },
                { word: 'kill', chinese: 'ÊùÄÊ≠ªÔºõÂºÑÊ≠ª', phonetic: '/k…™l/', type: 'v.' },
                { word: 'stand', chinese: 'Á´ôÁ´ã', phonetic: '/st√¶nd/', type: 'v.' },
                { word: 'cut', chinese: 'Á†çÔºõÂàá', phonetic: '/k åt/', type: 'v.' },
                { word: 'bear', chinese: 'ÊâøÂèóÔºõÂÆπÂøç', phonetic: '/be…ô(r)/', type: 'v.' },
                { word: 'look', chinese: 'ÁúãÔºõÁûß', phonetic: '/l äk/', type: 'v.' }
            ],
            descriptions: [
                { word: 'scary', chinese: 'Âêì‰∫∫ÁöÑÔºõÊÅêÊÄñÁöÑ', phonetic: '/Ààske…ôri/', type: 'adj.' },
                { word: 'huge', chinese: 'Â∑®Â§ßÁöÑÔºõÊûÅÂ§öÁöÑ', phonetic: '/hjuÀêd í/', type: 'adj.' },
                { word: 'dangerous', chinese: 'Âç±Èô©ÁöÑÔºõÊúâÂç±ÂÆ≥ÁöÑ', phonetic: '/Ààde…™nd í…ôr…ôs/', type: 'adj.' },
                { word: 'playful', chinese: 'Áà±Â¨âÊàèÁöÑÔºõÁà±Áé©ÁöÑ', phonetic: '/Ààple…™fl/', type: 'adj.' },
                { word: 'friendly', chinese: 'ÂèãÂ•ΩÁöÑ', phonetic: '/Ààfrendli/', type: 'adj.' },
                { word: 'quite', chinese: 'Áõ∏ÂΩìÔºõÂÆåÂÖ®', phonetic: '/kwa…™t/', type: 'adv.' },
                { word: 'blind', chinese: 'ÁûéÁöÑÔºõÂ§±ÊòéÁöÑ', phonetic: '/bla…™nd/', type: 'adj.' },
                { word: 'should', chinese: 'Â∫îËØ•ÔºõÂ∫îÂΩì', phonetic: '/ É äd;  É…ôd/', type: 'modal v.' },
                { word: 'cool', chinese: 'Â¶ôÊûÅÁöÑÔºõÈÖ∑ÁöÑ', phonetic: '/kuÀêl/', type: 'adj.' },
                { word: 'lovely', chinese: '‰ºòÁæéÁöÑÔºõËø∑‰∫∫ÁöÑ', phonetic: '/Ààl åvli/', type: 'adj.' },
                { word: 'cold', chinese: 'ÂØíÂÜ∑ÁöÑ', phonetic: '/k…ô äld/', type: 'adj.' },
                { word: 'close', chinese: '‰∫≤ÂØÜÁöÑÔºõÊé•ËøëÁöÑ', phonetic: '/kl…ô äs/', type: 'adj./adv.' },
                { word: 'warm', chinese: 'Ê∏©ÊöñÁöÑÔºõÊöñÂíåÁöÑ', phonetic: '/w…îÀêm/', type: 'adj.' },
                { word: 'strong', chinese: 'Âº∫Â£ÆÁöÑÔºõÂº∫ÂÅ•ÁöÑ', phonetic: '/str…í≈ã/', type: 'adj.' },
                { word: 'heavy', chinese: 'ÈáçÁöÑÔºõÊ≤âÁöÑ', phonetic: '/Ààhevi/', type: 'adj.' },
                { word: 'safe', chinese: 'ÂÆâÂÖ®ÁöÑ', phonetic: '/se…™f/', type: 'adj.' }
            ],
            nouns: [
                { word: 'care', chinese: 'ÁÖßÈ°æÔºõÊä§ÁêÜ', phonetic: '/ke…ô(r)/', type: 'n.' },
                { word: 'sandwich', chinese: '‰∏âÊòéÊ≤ª', phonetic: '/Ààs√¶nw…™t É; Ààs√¶nw…™d í/', type: 'n.' },
                { word: 'neck', chinese: 'ËÑñÂ≠ê', phonetic: '/nek/', type: 'n.' },
                { word: 'luck', chinese: 'Âπ∏ËøêÔºõËøêÊ∞î', phonetic: '/l åk/', type: 'n.' },
                { word: 'Thai', chinese: 'Ê≥∞ÂõΩ‰∫∫ÔºõÊ≥∞ËØ≠', phonetic: '/ta…™/', type: 'n./adj.' },
                { word: 'trunk', chinese: 'Ë±°Èºª', phonetic: '/tr å≈ãk/', type: 'n.' },
                { word: 'swimmer', chinese: 'Ê∏∏Ê≥≥ËÄÖ', phonetic: '/Ààsw…™m…ô(r)/', type: 'n.' },
                { word: 'one another', chinese: '‰∫íÁõ∏', phonetic: '', type: 'phrase' },
                { word: 'culture', chinese: 'ÊñáÂåñÔºõÊñáÊòé', phonetic: '/Ààk ålt É…ô(r)/', type: 'n.' },
                { word: 'however', chinese: 'ÁÑ∂ËÄåÔºõ‰∏çËøá', phonetic: '/ha äÀàev…ô(r)/', type: 'adv.' },
                { word: 'danger', chinese: 'Âç±Èô©', phonetic: '/Ààde…™nd í…ô(r)/', type: 'n.' },
                { word: 'in danger', chinese: 'Â§Ñ‰∫éÂç±Èô©‰πã‰∏≠', phonetic: '', type: 'phrase' },
                { word: 'forest', chinese: 'Ê£ÆÊûó', phonetic: '/Ààf…ír…™st/', type: 'n.' },
                { word: 'too many', chinese: 'Â§™Â§ö', phonetic: '', type: 'phrase' },
                { word: 'made of', chinese: 'Áî±‚Ä¶‚Ä¶Âà∂ÊàêÁöÑ', phonetic: '', type: 'phrase' },
                { word: 'ivory', chinese: 'Ë±°Áâô', phonetic: '/Ààa…™v…ôri/', type: 'n.' },
                { word: 'quite a', chinese: 'Áõ∏ÂΩìÔºõÈùûÂ∏∏', phonetic: '', type: 'phrase' },
                { word: 'not ‚Ä¶ at all', chinese: '‰∏ÄÁÇπ‰πü‰∏çÔºõÂÆåÂÖ®‰∏ç', phonetic: '', type: 'phrase' },
                { word: 'fur', chinese: '(Âä®Áâ©ÊµìÂéöÁöÑ)ËΩØÊØõ', phonetic: '/f…úÀê(r)/', type: 'n.' },
                { word: 'hearing', chinese: 'Âê¨ÂäõÔºõÂê¨Ëßâ', phonetic: '/Ààh…™…ôr…™≈ã/', type: 'n.' },
                { word: 'looks', chinese: 'Áõ∏Ë≤åÔºõÂÆπË≤å', phonetic: '/l äks/', type: 'n.' },
                { word: 'tail', chinese: 'Â∞æÂ∑¥', phonetic: '/te…™l/', type: 'n.' },
                { word: 'ear', chinese: 'ËÄ≥Êúµ', phonetic: '/…™…ô(r)/', type: 'n.' },
                { word: 'sea', chinese: 'Êµ∑ÔºõÊµ∑Ê¥ã', phonetic: '/siÀê/', type: 'n.' },
                { word: 'water', chinese: 'Ê∞¥', phonetic: '/Ààw…îÀêt…ô(r)/', type: 'n.' }
            ],
            places: [
                { word: 'Antarctica', chinese: 'ÂçóÊûÅÊ¥≤', phonetic: '/√¶nÀàt…ëÀêkt…™k…ô/', type: 'n.' },
                { word: 'Africa', chinese: 'ÈùûÊ¥≤', phonetic: '/Àà√¶fr…™k…ô/', type: 'n.' },
                { word: 'Malee', chinese: 'È©¨Ëéâ', phonetic: '/m…ëÀêÀàliÀê/', type: 'n.' },
                { word: 'Thailand', chinese: 'Ê≥∞ÂõΩ', phonetic: '/Ààta…™l√¶nd/', type: 'n.' }
            ]
        };
        
        let currentCategory = 'animals';
        let currentGameMode = 'translation';
        let currentWord = null;
        let score = 0;
        let correctAnswers = 0;
        let totalAttempts = 0;
        let streak = 0;
        let maxStreak = 0;
        let completedWords = new Set();
        let startTime = Date.now();
        let timerInterval = null;
        
        // Leaderboard data
        let leaderboardData = JSON.parse(localStorage.getItem('unit1-leaderboard')) || [];
        let currentFilter = 'today';
        let currentStudentName = '';
        
        function selectCategory(category) {
            currentCategory = category;
            
            // Update tab styling
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reset and start new game
            startNewQuestion();
        }
        
        function selectGameMode(mode) {
            currentGameMode = mode;
            
            // Update mode styling
            document.querySelectorAll('.game-mode').forEach(modeEl => {
                modeEl.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Start new question
            startNewQuestion();
        }
        
        function getCurrentVocabulary() {
            if (currentCategory === 'all') {
                let allWords = [];
                Object.values(vocabularyData).forEach(category => {
                    allWords = allWords.concat(category);
                });
                return allWords;
            }
            return vocabularyData[currentCategory] || [];
        }
        
        function startNewQuestion() {
            clearMessage();
            const vocabulary = getCurrentVocabulary();
            
            if (vocabulary.length === 0) return;
            
            // Select random word
            currentWord = vocabulary[Math.floor(Math.random() * vocabulary.length)];
            
            // Display based on game mode
            switch (currentGameMode) {
                case 'translation':
                    setupTranslationGame();
                    break;
                case 'spelling':
                    setupSpellingGame();
                    break;
                case 'definition':
                    setupDefinitionGame();
                    break;
                case 'phonetic':
                    setupPhoneticGame();
                    break;
            }
            
            updateStats();
        }
        
        function setupTranslationGame() {
            const gameArea = document.getElementById('game-area');
            const isEnglishFirst = Math.random() > 0.5;
            
            const wordDisplay = `
                <div class="word-display">
                    <div class="word-card">
                        <div class="word-english">${isEnglishFirst ? currentWord.word : currentWord.chinese}</div>
                        ${currentWord.phonetic ? `<div class="word-phonetic">${isEnglishFirst ? currentWord.phonetic : ''}</div>` : ''}
                        <div class="word-chinese">${isEnglishFirst ? currentWord.chinese : currentWord.word}</div>
                    </div>
                </div>
            `;
            
            const question = isEnglishFirst ? 
                `What is the Chinese meaning of "${currentWord.word}"?` :
                `What is the English word for "${currentWord.chinese}"?`;
            
            gameArea.innerHTML = wordDisplay + `
                <div class="definition-card">${question}</div>
                <div class="answer-options" id="answer-options"></div>
            `;
            
            // Generate answer options
            generateTranslationOptions(isEnglishFirst);
        }
        
        function setupSpellingGame() {
            const gameArea = document.getElementById('game-area');
            
            gameArea.innerHTML = `
                <div class="word-display">
                    <div class="word-card">
                        <div class="word-chinese">${currentWord.chinese}</div>
                        ${currentWord.phonetic ? `<div class="word-phonetic">${currentWord.phonetic}</div>` : ''}
                    </div>
                </div>
                <div class="definition-card">Spell the English word:</div>
                <div style="text-align: center; margin: 30px 0;">
                    <input type="text" id="spelling-input" style="font-size: 1.5rem; padding: 15px; border: 3px solid #667eea; border-radius: 15px; width: 300px; font-family: 'Fredoka', cursive;" placeholder="Type your answer...">
                    <br><br>
                    <button class="btn" onclick="checkSpelling()">Check Spelling</button>
                </div>
            `;
            
            // Focus on input
            setTimeout(() => {
                document.getElementById('spelling-input').focus();
                document.getElementById('spelling-input').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkSpelling();
                    }
                });
            }, 100);
        }
        
        function setupDefinitionGame() {
            const gameArea = document.getElementById('game-area');
            
            const wordDisplay = `
                <div class="word-display">
                    <div class="word-card">
                        <div class="word-english">${currentWord.word}</div>
                        ${currentWord.phonetic ? `<div class="word-phonetic">${currentWord.phonetic}</div>` : ''}
                    </div>
                </div>
            `;
            
            const definition = `What is the correct definition of "${currentWord.word}"?`;
            
            gameArea.innerHTML = wordDisplay + `
                <div class="definition-card">${definition}</div>
                <div class="answer-options" id="answer-options"></div>
            `;
            
            generateDefinitionOptions();
        }
        
        function setupPhoneticGame() {
            const gameArea = document.getElementById('game-area');
            
            gameArea.innerHTML = `
                <div class="word-display">
                    <div class="word-card">
                        <div class="word-english">Listen carefully!</div>
                        <button class="btn" onclick="speakWord()" style="margin-top: 20px;">üîä Play Sound</button>
                    </div>
                </div>
                <div class="definition-card">Which word matches the pronunciation?</div>
                <div class="answer-options" id="answer-options"></div>
            `;
            
            generatePhoneticOptions();
            
            // Auto-play sound
            setTimeout(() => speakWord(), 500);
        }
        
        function generateTranslationOptions(isEnglishFirst) {
            const optionsContainer = document.getElementById('answer-options');
            const vocabulary = getCurrentVocabulary();
            const options = [];
            
            // Add correct answer
            const correctAnswer = isEnglishFirst ? currentWord.chinese : currentWord.word;
            options.push({ text: correctAnswer, correct: true });
            
            // Add distractors
            while (options.length < 4) {
                const randomWord = vocabulary[Math.floor(Math.random() * vocabulary.length)];
                const distractor = isEnglishFirst ? randomWord.chinese : randomWord.word;
                
                if (!options.find(opt => opt.text === distractor)) {
                    options.push({ text: distractor, correct: false });
                }
            }
            
            // Shuffle options
            options.sort(() => Math.random() - 0.5);
            
            // Create buttons
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = option.text;
                btn.onclick = () => checkAnswer(option.correct, btn);
                optionsContainer.appendChild(btn);
            });
        }
        
        function generateDefinitionOptions() {
            const optionsContainer = document.getElementById('answer-options');
            const vocabulary = getCurrentVocabulary();
            const options = [];
            
            // Add correct definition
            options.push({ text: currentWord.chinese, correct: true });
            
            // Add distractors
            while (options.length < 4) {
                const randomWord = vocabulary[Math.floor(Math.random() * vocabulary.length)];
                if (randomWord.chinese !== currentWord.chinese && 
                    !options.find(opt => opt.text === randomWord.chinese)) {
                    options.push({ text: randomWord.chinese, correct: false });
                }
            }
            
            // Shuffle options
            options.sort(() => Math.random() - 0.5);
            
            // Create buttons
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = option.text;
                btn.onclick = () => checkAnswer(option.correct, btn);
                optionsContainer.appendChild(btn);
            });
        }
        
        function generatePhoneticOptions() {
            const optionsContainer = document.getElementById('answer-options');
            const vocabulary = getCurrentVocabulary();
            const options = [];
            
            // Add correct word
            options.push({ text: currentWord.word, correct: true });
            
            // Add distractors
            while (options.length < 4) {
                const randomWord = vocabulary[Math.floor(Math.random() * vocabulary.length)];
                if (randomWord.word !== currentWord.word && 
                    !options.find(opt => opt.text === randomWord.word)) {
                    options.push({ text: randomWord.word, correct: false });
                }
            }
            
            // Shuffle options
            options.sort(() => Math.random() - 0.5);
            
            // Create buttons
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = option.text;
                btn.onclick = () => checkAnswer(option.correct, btn);
                optionsContainer.appendChild(btn);
            });
        }
        
        function checkSpelling() {
            const input = document.getElementById('spelling-input');
            const userAnswer = input.value.trim().toLowerCase();
            const correctAnswer = currentWord.word.toLowerCase();
            
            totalAttempts++;
            
            if (userAnswer === correctAnswer) {
                correctAnswers++;
                score += 10;
                streak++;
                maxStreak = Math.max(maxStreak, streak);
                completedWords.add(currentWord.word);
                
                showMessage('‚úÖ Correct! Well done!', 'success');
                setTimeout(() => startNewQuestion(), 2000);
            } else {
                streak = 0;
                showMessage(`‚ùå Wrong! The correct answer is: ${currentWord.word}`, 'error');
                setTimeout(() => startNewQuestion(), 3000);
            }
            
            updateStats();
        }
        
        function checkAnswer(isCorrect, button) {
            if (button.classList.contains('correct') || button.classList.contains('wrong')) {
                return;
            }
            
            totalAttempts++;
            
            if (isCorrect) {
                button.classList.add('correct');
                correctAnswers++;
                score += 10;
                streak++;
                maxStreak = Math.max(maxStreak, streak);
                completedWords.add(currentWord.word);
                
                showMessage('‚úÖ Correct! Well done!', 'success');
                
                // Disable all buttons
                document.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.disabled = true;
                    if (!btn.classList.contains('correct')) {
                        btn.classList.add('wrong');
                    }
                });
                
                setTimeout(() => startNewQuestion(), 2000);
            } else {
                button.classList.add('wrong');
                streak = 0;
                showMessage('‚ùå Try again!', 'error');
            }
            
            updateStats();
        }
        
        function speakWord() {
            const utterance = new SpeechSynthesisUtterance(currentWord.word);
            utterance.rate = 0.8;
            utterance.pitch = 1.2;
            speechSynthesis.speak(utterance);
        }
        
        function showHint() {
            if (currentWord) {
                const hint = currentWord.phenotic || `Type: ${currentWord.type}`;
                showMessage(`üí° Hint: ${hint}`, 'info');
                
                // Deduct points for hint
                score = Math.max(0, score - 5);
                updateStats();
            }
        }
        
        function skipQuestion() {
            showMessage('‚è≠Ô∏è Skipped!', 'info');
            startNewQuestion();
        }
        
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress?')) {
                score = 0;
                correctAnswers = 0;
                totalAttempts = 0;
                streak = 0;
                completedWords.clear();
                updateStats();
                updateCompletedWords();
                showMessage('üîÑ Progress reset!', 'info');
            }
        }
        
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('correct').textContent = correctAnswers;
            document.getElementById('streak').textContent = streak;
            
            const accuracy = totalAttempts > 0 ? 
                Math.round((correctAnswers / totalAttempts) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
            
            // Update progress
            const totalWords = Object.values(vocabularyData).flat().length;
            const progressPercent = Math.round((completedWords.size / totalWords) * 100);
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = progressPercent + '%';
            progressFill.textContent = progressPercent + '% Complete';
            
            updateCompletedWords();
        }
        
        function updateCompletedWords() {
            const container = document.getElementById('completed-words');
            container.innerHTML = '';
            
            completedWords.forEach(word => {
                const tag = document.createElement('span');
                tag.className = 'word-tag';
                tag.textContent = word;
                container.appendChild(tag);
            });
        }
        
        function toggleLeaderboard() {
            const panel = document.getElementById('leaderboard-panel');
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                updateLeaderboard();
            } else {
                panel.style.display = 'none';
            }
        }
        
        function saveScore() {
            const nameInput = document.getElementById('student-name');
            const studentName = nameInput.value.trim();
            
            if (!studentName) {
                showMessage('Please enter your name!', 'error');
                return;
            }
            
            if (totalAttempts === 0) {
                showMessage('Answer some questions first!', 'error');
                return;
            }
            
            const accuracy = totalAttempts > 0 ? Math.round((correctAnswers / totalAttempts) * 100) : 0;
            
            const entry = {
                name: studentName,
                score: score,
                accuracy: accuracy,
                wordsCompleted: completedWords.size,
                totalWords: Object.values(vocabularyData).flat().length,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            leaderboardData.push(entry);
            localStorage.setItem('unit1-leaderboard', JSON.stringify(leaderboardData));
            
            currentStudentName = studentName;
            nameInput.value = '';
            
            // Show achievement popup
            showAchievement(studentName, score, accuracy);
            
            // Update leaderboard display
            updateLeaderboard();
            
            // Show success message
            showMessage(`Score saved! Great job ${studentName}! üéâ`, 'success');
        }
        
        function showAchievement(name, score, accuracy) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            
            let achievementLevel = 'Good Job!';
            if (score >= 200) achievementLevel = 'Amazing! üåü';
            if (score >= 500) achievementLevel = 'Incredible! üî•';
            if (score >= 1000) achievementLevel = 'Legendary! üëë';
            
            popup.innerHTML = `
                <div class="achievement-title">${achievementLevel}</div>
                <div class="achievement-desc">
                    ${name}: ${score} points<br>
                    ${accuracy}% accuracy
                </div>
            `;
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.remove();
            }, 3000);
        }
        
        function filterLeaderboard(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateLeaderboard();
        }
        
        function updateLeaderboard() {
            const leaderboardList = document.getElementById('leaderboard-list');
            leaderboardList.innerHTML = '';
            
            // Filter data based on current filter
            let filteredData = [...leaderboardData];
            const now = Date.now();
            
            if (currentFilter === 'today') {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                filteredData = filteredData.filter(entry => 
                    new Date(entry.date) >= today
                );
            } else if (currentFilter === 'week') {
                const weekAgo = now - (7 * 24 * 60 * 60 * 1000);
                filteredData = filteredData.filter(entry => 
                    entry.timestamp >= weekAgo
                );
            }
            
            // Sort by score (descending), then by accuracy (descending)
            filteredData.sort((a, b) => {
                if (b.score !== a.score) {
                    return b.score - a.score;
                }
                return b.accuracy - a.accuracy;
            });
            
            // Take top 20
            const topScores = filteredData.slice(0, 20);
            
            // Display entries
            topScores.forEach((entry, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                
                // Add special styling for top 3
                if (index === 0) item.classList.add('rank-1');
                else if (index === 1) item.classList.add('rank-2');
                else if (index === 2) item.classList.add('rank-3');
                
                const rankDisplay = index < 3 ? 
                    `<span class="rank-medal">${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}</span>` :
                    `<span>#${index + 1}</span>`;
                
                const date = new Date(entry.date);
                const dateStr = date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric' 
                });
                
                item.innerHTML = `
                    ${rankDisplay}
                    <span>${entry.name}</span>
                    <span>${entry.score}</span>
                    <span>${entry.accuracy}%</span>
                    <span>${entry.wordsCompleted}/${entry.totalWords}</span>
                    <span>${dateStr}</span>
                `;
                
                // Highlight current student's entry
                if (entry.name === currentStudentName) {
                    item.style.background = 'rgba(102,126,234,0.2)';
                    item.style.border = '2px solid #667eea';
                }
                
                leaderboardList.appendChild(item);
            });
            
            if (topScores.length === 0) {
                leaderboardList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">üìä</div>
                        <div>No scores yet. Be the first to play!</div>
                    </div>
                `;
            }
        }
        
        function exportLeaderboard() {
            if (leaderboardData.length === 0) {
                showMessage('No data to export!', 'error');
                return;
            }
            
            // Create CSV content
            const headers = ['Rank', 'Student', 'Score', 'Accuracy', 'Words Completed', 'Total Words', 'Date'];
            const csvContent = [
                headers.join(','),
                ...leaderboardData.map((entry, index) => {
                    const date = new Date(entry.date).toLocaleDateString();
                    return [
                        index + 1,
                        `"${entry.name}"`,
                        entry.score,
                        entry.accuracy + '%',
                        entry.wordsCompleted,
                        entry.totalWords,
                        date
                    ].join(',');
                })
            ].join('\n');
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `unit1-leaderboard-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showMessage('Leaderboard data exported! üìä', 'success');
        }
        
        function clearLeaderboard() {
            if (confirm('Are you sure you want to clear all leaderboard data? This cannot be undone!')) {
                leaderboardData = [];
                localStorage.removeItem('unit1-leaderboard');
                updateLeaderboard();
                showMessage('Leaderboard cleared!', 'info');
            }
        }
        
        function showMessage(text, type) {
            const messageContainer = document.getElementById('message');
            messageContainer.innerHTML = `<div class="message ${type}">${text}</div>`;
        }
        
        function clearMessage() {
            document.getElementById('message').innerHTML = '';
        }
        
        // Timer
        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `‚è±Ô∏è ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // Initialize game
        window.onload = function() {
            updateStats();
            startTimer();
            startNewQuestion();
            
            // Load saved student name if exists
            const savedName = localStorage.getItem('unit1-student-name');
            if (savedName) {
                currentStudentName = savedName;
                document.getElementById('student-name').value = savedName;
            }
            
            // Save student name on input
            document.getElementById('student-name').addEventListener('input', function(e) {
                localStorage.setItem('unit1-student-name', e.target.value);
            });
        };
    </script>
</body>
</html>